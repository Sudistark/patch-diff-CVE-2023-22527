<html>
    <head>
        <title>$i18n.getText("properties.attachment", ["$htmlUtil.htmlEncode($newFileName)"])#if($page.title) - $page.title#end</title>
    </head>

    #set ($confPage = $action.page)
    #set ($labels = $attachment.labels)
    #set ($labelable = $attachment)

    <content tag="title-text-span">$i18n.getText("properties.attachment", ["$htmlUtil.htmlEncode($newFileName)"])</content>

    <!-- call the page decorator -->
    #applyDecorator("root")
        #decoratorParam("helper" $action.helper)
        #decoratorParam("mode" "view-attachment")
        #decoratorParam("context" "$action.page.type")

        <body>
            #requireResource("confluence.web.resources:attachments")
            <div class="page-metadata">
                <ul>
                    <li class="page-metadata-modification-info">
                        $action.getText('added.on.date.by.user.edited.on.date', [
                            "#if($attachment.creationDate)$action.dateFormatter.formatDateTime($attachment.creationDate)#{else}
                                $action.getText('not.available')#end", "#userLink ($attachment.creator)",
                            "#if($attachment.lastModificationDate)$action.dateFormatter.formatDateTime($attachment.lastModificationDate)#{else}
                                $action.getText('not.available')#end"])
                    </li>
                </ul>
            </div>
            <form name="editattachment" method="POST" action="doeditattachment.action?pageId=$page.id&attachmentBean.fileName=$htmlUtil.urlEncode($attachment.fileName)" class="aui">
                #form_xsrfToken()
                #shidden("name='pageId'" "value='$pageId'")
                #shidden("name='isFromPageView'" "value='$isFromPageView'")

                <div class="attachment-field">
                    #fielderror('rename')
                    #stextfield("label='file.name'" "name='newFileName'" "theme='aui'" "tabindex=1")
                </div>

                <div class="attachment-field">
                    <div class="field-group">
                        <label>$action.getText("labels.title")</label>
                        #parse("/com/atlassian/confluence/plugins/labels/components/labels-content.vm")
                    </div>
                </div>

                <div class="attachment-field">
                    #fielderror ('newComment')
                    #stextfield("label='new.comment'" "name='newComment'" "theme='aui'" "tabindex=2" "maxlength=255")
                </div>

                <div class="attachment-field">
                    #fielderror ('newContentType')
                    #stextfield("label='new.contentType'" "name='newContentType'""theme='aui'" "tabindex=3" "maxlength=255")
                </div>

                <div class="attachment-field">
                    #fielderror ('move')
                    #stextfield("label='page.word'" "name='newParentPage'" "theme='aui'" "tabindex=4" "maxlength=255" "description=$action.getText('move.attachment.desc')")
                </div>

                #ssubmit("theme='aui'" "submitValue=$i18n.getText('save.name')" "editMode=true" "tabindex=5")
            </form>
        </body>
    #end
</html>
