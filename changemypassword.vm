<html>
	<head>
		<title>$htmlUtil.htmlEncode($pageTitle)</title>
        #requireResource("confluence.web.resources:aui-forms")
</head>

    #applyDecorator("root")
        #decoratorParam("context" "profile")
        #decoratorParam("mode"  "settings")
        #decoratorParam("helper" $action.helper)

        <body>
        #if ($settingsManager.getGlobalSettings().isExternalUserManagement())
            $action.getText("cannot.change.password.users.outside")
        #elseif(!$userAccessor.isReadOnly($remoteUser))
            #applyDecorator("form-aui")
                #decoratorParam("formName" "changepassword")
                #decoratorParam("submitAction"  "dochangemypassword.action")
                #decoratorParam("editAction" "changemypassword.action")
                #decoratorParam("editMode" "$editMode")
                #decoratorParam("saveValue" "Save")

                <h2>$action.getText("change.password")</h2>
                <fieldset>
                    #assistiveLegend("accessibility.profile.password")
                    #spassword("label='cur.pass.name'" "name='currentPassword'" "required=$action.getText('required.field')")
                    #spassword("label='new.pass.name'" "name='newPassword'" "required=$action.getText('required.field')")
                    #spassword("label='new.pass.confirm.name'" "name='newPasswordConfirmation'" "required=$action.getText('required.field')")
                </fieldset>
                #form_xsrfToken()
                #ssubmit("theme='aui'")
            #end
        #end
        </body>

    #end
</html>
