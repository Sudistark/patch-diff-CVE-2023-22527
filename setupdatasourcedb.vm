
<html>
<head>
    <title>$action.getText("setup.datasource.database.title")</title>
    #requireResource("com.atlassian.auiplugin:aui-spinner")
    $webResourceManager.requireResourcesForContext("setup.setup-db")
    $webResourceManager.requireResourcesForContext("setup.setup-datasource")
</head>

<body>
    #parse ("/setup/analytics-data.vm")
    #parse ("/setup/setup-button.vm")
    #parse ("/setup/setup-progress-indicator.vm" )
    #parse ( "/template/includes/actionerrors.vm" )

    <div class="setup-hint">
        #if ($action.isMultipleDatasources())
            $action.getText("setup.datasource.multiple.database.description")
        #else
            $action.getText("setup.datasource.database.description")
        #end
    </div>

    #if ($dbConfigInfo.dbNotes.size() > 0 && !$action.MySQL)
        #foreach ($dbNote in $dbConfigInfo.dbNotes)
            #applyDecorator("warning" "")
                $dbNote
            #end
        #end
    #end

    <form name="setupdatasourcedb" id="setupdatasourcedb" method="POST" action="setupdatasourcedb.action" class="aui">
        #fielderror ("datasourceName")
        #stextfield("label='datasource.name'" "name='datasourceName'" "theme='aui'" "cssClass='long-field'")
        #shidden("name='database'" )
        #form_xsrfToken()

        <div class="field-group form-buttons compact-form-buttons">
            <button class="aui-button" id="testConnection" name="testConnection" type="button">$action.getText('setup.database.test.connection')</button>
            <div id="setupdb-successMessage" class="success">
                <span class="custom-icon icon-success"></span><div class="connectionSuccess">$action.getText("setup.database.test.connection.success")</div>
            </div>
            <div id="setupdb-spinner" class="button-spinner"></div>
        </div>
        <div class="buttons-container setup-progress-spinner-container">
            <div class="buttons">
                #if ($action.isThisNodeClustered())
                    #set($backLink = "$req.contextPath/setup/setupdbchoice-start.action?thisNodeClustered=true")
                #else
                    #set($backLink = "$req.contextPath/setup/setupdbchoice-start.action")
                #end
                #setupNextButton(false)
                <a href="$backLink" class="aui-button aui-button-link setup-back-button">$action.getText('setup.back')</a>
            </div>
        </div>
    </form>
</body>
</html>
