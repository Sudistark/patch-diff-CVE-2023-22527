package com.mchange.v1.db.sql;

import java.sql.SQLException;
import java.util.HashSet;
import java.util.Set;
import javax.sql.ConnectionEvent;
import javax.sql.ConnectionEventListener;
import javax.sql.PooledConnection;

public class ConnectionEventSupport {
  PooledConnection source;
  
  Set mlisteners;
  
  public ConnectionEventSupport(PooledConnection paramPooledConnection) {
    this.mlisteners = new HashSet();
    this.source = paramPooledConnection;
  }
  
  public void addConnectionEventListener(ConnectionEventListener paramConnectionEventListener) { this.mlisteners.add(paramConnectionEventListener); }
  
  public void removeConnectionEventListener(ConnectionEventListener paramConnectionEventListener) { this.mlisteners.remove(paramConnectionEventListener); }
  
  public void fireConnectionClosed() {
    ConnectionEvent connectionEvent = new ConnectionEvent(this.source);
    for (ConnectionEventListener connectionEventListener : this.mlisteners)
      connectionEventListener.connectionClosed(connectionEvent); 
  }
  
  public void fireConnectionErrorOccurred(SQLException paramSQLException) {
    ConnectionEvent connectionEvent = new ConnectionEvent(this.source, paramSQLException);
    for (ConnectionEventListener connectionEventListener : this.mlisteners)
      connectionEventListener.connectionErrorOccurred(connectionEvent); 
  }
}
