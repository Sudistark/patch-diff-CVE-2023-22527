package com.hazelcast.map.impl.querycache.subscriber;

import com.hazelcast.map.impl.ListenerAdapter;
import com.hazelcast.map.impl.MapListenerAdaptors;
import com.hazelcast.map.listener.MapListener;
import com.hazelcast.util.ConstructorFunction;

public final class QueryCacheEventListenerAdapters {
  private static final ConstructorFunction<MapListener, ListenerAdapter> EVENT_LOST_LISTENER_ADAPTER = new Object();
  
  static ListenerAdapter[] createQueryCacheListenerAdapters(MapListener mapListener) {
    ListenerAdapter[] mapListenerAdapters = MapListenerAdaptors.createListenerAdapters(mapListener);
    ListenerAdapter eventLostAdapter = (ListenerAdapter)EVENT_LOST_LISTENER_ADAPTER.createNew(mapListener);
    ListenerAdapter[] adapters = new ListenerAdapter[mapListenerAdapters.length + 1];
    System.arraycopy(mapListenerAdapters, 0, adapters, 0, mapListenerAdapters.length);
    adapters[mapListenerAdapters.length] = eventLostAdapter;
    return adapters;
  }
  
  public static ListenerAdapter createQueryCacheListenerAdaptor(MapListener mapListener) { return new InternalQueryCacheListenerAdapter(mapListener); }
}
