package com.hazelcast.map.impl;

import com.hazelcast.core.EntryEventType;

public final class MapListenerFlagOperator {
  public static final int SET_ALL_LISTENER_FLAGS = setAndGetAllListenerFlags();
  
  public static int setAndGetListenerFlags(ListenerAdapter listenerAdapter) {
    InternalMapListenerAdapter internalMapListenerAdapter = (InternalMapListenerAdapter)listenerAdapter;
    ListenerAdapter[] listenerAdapters = internalMapListenerAdapter.getListenerAdapters();
    EntryEventType[] values = EntryEventType.values();
    int listenerFlags = 0;
    for (EntryEventType eventType : values) {
      ListenerAdapter definedAdapter = listenerAdapters[eventType.ordinal()];
      if (definedAdapter != null)
        listenerFlags |= eventType.getType(); 
    } 
    return listenerFlags;
  }
  
  private static int setAndGetAllListenerFlags() {
    listenerFlags = 0;
    EntryEventType[] values = EntryEventType.values();
    for (EntryEventType eventType : values)
      listenerFlags |= eventType.getType(); 
    return listenerFlags;
  }
}
