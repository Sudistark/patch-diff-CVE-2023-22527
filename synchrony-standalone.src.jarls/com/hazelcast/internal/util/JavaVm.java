package com.hazelcast.internal.util;

import java.util.Properties;

public static enum JavaVm {
  UNKNOWN, HOTSPOT, OPENJ9;
  
  public static final JavaVm CURRENT_VM;
  
  static  {
    CURRENT_VM = detectCurrentVM();
  }
  
  private static JavaVm detectCurrentVM() {
    properties = System.getProperties();
    return parse(properties);
  }
  
  static JavaVm parse(Properties properties) {
    String vmName = properties.getProperty("java.vm.name");
    if (vmName == null)
      return UNKNOWN; 
    if (vmName.contains("HotSpot"))
      return HOTSPOT; 
    if (vmName.contains("OpenJ9"))
      return OPENJ9; 
    String prop = properties.getProperty("sun.management.compiler");
    if (prop == null)
      return UNKNOWN; 
    if (prop.contains("HotSpot"))
      return HOTSPOT; 
    return UNKNOWN;
  }
}
