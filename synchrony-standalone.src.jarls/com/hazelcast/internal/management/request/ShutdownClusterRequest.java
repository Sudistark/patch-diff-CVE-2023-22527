package com.hazelcast.internal.management.request;

import com.hazelcast.internal.json.JsonObject;
import com.hazelcast.internal.management.ManagementCenterService;
import com.hazelcast.logging.ILogger;

public class ShutdownClusterRequest implements AsyncConsoleRequest {
  public int getType() { return 36; }
  
  public void writeResponse(ManagementCenterService mcs, JsonObject out) throws Exception {
    String resultString = "SUCCESS";
    try {
      mcs.getHazelcastInstance().getCluster().shutdown();
    } catch (Exception e) {
      ILogger logger = (mcs.getHazelcastInstance()).node.nodeEngine.getLogger(getClass());
      logger.warning("Cluster can not be shutdown: ", e);
      resultString = e.getMessage();
    } 
    JsonObject result = (new JsonObject()).add("result", resultString);
    out.add("result", result);
  }
  
  public void fromJson(JsonObject json) {}
}
