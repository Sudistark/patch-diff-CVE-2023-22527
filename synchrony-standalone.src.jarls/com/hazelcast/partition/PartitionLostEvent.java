package com.hazelcast.partition;

import com.hazelcast.nio.Address;
import com.hazelcast.nio.ObjectDataInput;
import com.hazelcast.nio.ObjectDataOutput;
import com.hazelcast.nio.serialization.DataSerializable;
import com.hazelcast.nio.serialization.SerializableByConvention;
import java.io.IOException;

@SerializableByConvention(SerializableByConvention.Reason.PUBLIC_API)
public class PartitionLostEvent implements DataSerializable, PartitionEvent {
  private int partitionId;
  
  private int lostBackupCount;
  
  private Address eventSource;
  
  public PartitionLostEvent() {}
  
  public PartitionLostEvent(int partitionId, int lostBackupCount, Address eventSource) {
    this.partitionId = partitionId;
    this.lostBackupCount = lostBackupCount;
    this.eventSource = eventSource;
  }
  
  public int getPartitionId() { return this.partitionId; }
  
  public int getLostBackupCount() { return this.lostBackupCount; }
  
  public Address getEventSource() { return this.eventSource; }
  
  public void writeData(ObjectDataOutput out) throws IOException {
    out.writeInt(this.partitionId);
    out.writeInt(this.lostBackupCount);
    out.writeObject(this.eventSource);
  }
  
  public void readData(ObjectDataInput in) throws IOException {
    this.partitionId = in.readInt();
    this.lostBackupCount = in.readInt();
    this.eventSource = (Address)in.readObject();
  }
  
  public String toString() { return getClass().getName() + "{partitionId=" + this.partitionId + ", lostBackupCount=" + this.lostBackupCount + ", eventSource=" + this.eventSource + '}'; }
}
