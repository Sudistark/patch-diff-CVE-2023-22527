package com.hazelcast.config;

import com.hazelcast.config.replacer.spi.ConfigReplacer;
import com.hazelcast.config.yaml.W3cDomUtil;
import com.hazelcast.internal.yaml.MutableYamlNode;
import org.w3c.dom.Node;

class YamlDomVariableReplacer extends AbstractDomVariableReplacer {
  public void replaceVariables(Node node, ConfigReplacer replacer, boolean failFast) {
    replaceVariableInNodeValue(node, replacer, failFast);
    replaceVariableInNodeName(node, replacer, failFast);
  }
  
  private void replaceVariableInNodeName(Node node, ConfigReplacer replacer, boolean failFast) {
    if (node instanceof com.hazelcast.config.yaml.ElementAdapter) {
      MutableYamlNode yamlNode = W3cDomUtil.getWrappedMutableYamlNode(node);
      String nodeName = yamlNode.nodeName();
      if (nodeName != null) {
        String replacedName = replaceValue(node, replacer, failFast, nodeName);
        yamlNode.setNodeName(replacedName);
      } 
    } 
  }
}
