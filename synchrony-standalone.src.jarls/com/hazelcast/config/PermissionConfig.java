package com.hazelcast.config;

import java.util.Collections;
import java.util.Set;
import java.util.concurrent.ConcurrentHashMap;

public class PermissionConfig {
  private PermissionType type;
  
  private String name;
  
  private String principal;
  
  private Set<String> endpoints = Collections.newSetFromMap(new ConcurrentHashMap());
  
  private Set<String> actions = Collections.newSetFromMap(new ConcurrentHashMap());
  
  public PermissionConfig() {}
  
  public PermissionConfig(PermissionType type, String name, String principal) {
    this.type = type;
    this.name = name;
    this.principal = principal;
  }
  
  public PermissionConfig(PermissionConfig permissionConfig) {
    this.type = permissionConfig.type;
    this.name = permissionConfig.getName();
    this.principal = permissionConfig.getPrincipal();
    for (String endpoint : permissionConfig.getEndpoints())
      this.endpoints.add(endpoint); 
    for (String action : permissionConfig.getActions())
      this.actions.add(action); 
  }
  
  public PermissionConfig addEndpoint(String endpoint) {
    this.endpoints.add(endpoint);
    return this;
  }
  
  public PermissionConfig addAction(String action) {
    this.actions.add(action);
    return this;
  }
  
  public PermissionType getType() { return this.type; }
  
  public String getName() { return this.name; }
  
  public String getPrincipal() { return this.principal; }
  
  public Set<String> getEndpoints() { return this.endpoints; }
  
  public Set<String> getActions() { return this.actions; }
  
  public PermissionConfig setType(PermissionType type) {
    this.type = type;
    return this;
  }
  
  public PermissionConfig setName(String name) {
    this.name = name;
    return this;
  }
  
  public PermissionConfig setPrincipal(String principal) {
    this.principal = principal;
    return this;
  }
  
  public PermissionConfig setActions(Set<String> actions) {
    this.actions = actions;
    return this;
  }
  
  public PermissionConfig setEndpoints(Set<String> endpoints) {
    this.endpoints = endpoints;
    return this;
  }
  
  public boolean equals(Object o) {
    if (this == o)
      return true; 
    if (!(o instanceof PermissionConfig))
      return false; 
    PermissionConfig that = (PermissionConfig)o;
    if (this.type != that.type)
      return false; 
    if ((this.name != null) ? !this.name.equals(that.name) : (that.name != null))
      return false; 
    if ((this.principal != null) ? !this.principal.equals(that.principal) : (that.principal != null))
      return false; 
    if ((this.endpoints != null) ? !this.endpoints.equals(that.endpoints) : (that.endpoints != null))
      return false; 
    return (this.actions != null) ? this.actions.equals(that.actions) : ((that.actions == null) ? 1 : 0);
  }
  
  public int hashCode() {
    result = this.type.hashCode();
    result = 31 * result + ((this.name != null) ? this.name.hashCode() : 0);
    result = 31 * result + ((this.principal != null) ? this.principal.hashCode() : 0);
    result = 31 * result + ((this.endpoints != null) ? this.endpoints.hashCode() : 0);
    return 31 * result + ((this.actions != null) ? this.actions.hashCode() : 0);
  }
  
  public String toString() { return "PermissionConfig{type=" + this.type + ", name='" + this.name + '\'' + ", principal='" + this.principal + '\'' + ", endpoints=" + this.endpoints + ", actions=" + this.actions + '}'; }
}
