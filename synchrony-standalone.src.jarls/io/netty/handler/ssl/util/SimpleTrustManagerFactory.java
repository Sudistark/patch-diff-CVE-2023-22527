package io.netty.handler.ssl.util;

import io.netty.util.concurrent.FastThreadLocal;
import io.netty.util.internal.ObjectUtil;
import java.security.KeyStore;
import java.security.Provider;
import javax.net.ssl.ManagerFactoryParameters;
import javax.net.ssl.TrustManager;
import javax.net.ssl.TrustManagerFactory;
import javax.net.ssl.TrustManagerFactorySpi;

public abstract class SimpleTrustManagerFactory extends TrustManagerFactory {
  private static final Provider PROVIDER = new Object("", 0.0D, "");
  
  private static final FastThreadLocal<SimpleTrustManagerFactorySpi> CURRENT_SPI = new Object();
  
  protected SimpleTrustManagerFactory() { this(""); }
  
  protected SimpleTrustManagerFactory(String name) {
    super((TrustManagerFactorySpi)CURRENT_SPI.get(), PROVIDER, name);
    ((SimpleTrustManagerFactorySpi)CURRENT_SPI.get()).init(this);
    CURRENT_SPI.remove();
    ObjectUtil.checkNotNull(name, "name");
  }
  
  protected abstract void engineInit(KeyStore paramKeyStore) throws Exception;
  
  protected abstract void engineInit(ManagerFactoryParameters paramManagerFactoryParameters) throws Exception;
  
  protected abstract TrustManager[] engineGetTrustManagers();
}
