package io.netty.incubator.channel.uring;

final class MsgHdrMemoryArray {
  private int idx;
  
  private final MsgHdrMemory[] hdrs;
  
  private final int capacity;
  
  MsgHdrMemoryArray(int capacity) {
    this.capacity = capacity;
    this.hdrs = new MsgHdrMemory[capacity];
    for (int i = 0; i < this.hdrs.length; i++)
      this.hdrs[i] = new MsgHdrMemory(i); 
  }
  
  MsgHdrMemory nextHdr() {
    if (this.idx == this.hdrs.length - 1)
      return null; 
    return this.hdrs[this.idx++];
  }
  
  MsgHdrMemory hdr(int idx) { return this.hdrs[idx]; }
  
  void clear() { this.idx = 0; }
  
  int length() { return this.idx; }
  
  void release() {
    for (MsgHdrMemory hdr : this.hdrs)
      hdr.release(); 
  }
  
  int capacity() { return this.capacity; }
}
