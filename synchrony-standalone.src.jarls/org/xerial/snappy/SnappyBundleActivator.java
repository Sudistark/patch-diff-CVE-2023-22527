package org.xerial.snappy;

import org.osgi.framework.BundleActivator;
import org.osgi.framework.BundleContext;

public class SnappyBundleActivator implements BundleActivator {
  public static final String LIBRARY_NAME = "snappyjava";
  
  public void start(BundleContext paramBundleContext) throws Exception {
    String str = System.mapLibraryName("snappyjava");
    if (str.toLowerCase().endsWith(".dylib"))
      str = str.replace(".dylib", ".jnilib"); 
    System.loadLibrary(str);
    SnappyLoader.setSnappyApi(new SnappyNative());
  }
  
  public void stop(BundleContext paramBundleContext) throws Exception {
    SnappyLoader.setSnappyApi(null);
    SnappyLoader.cleanUpExtractedNativeLib();
  }
}
