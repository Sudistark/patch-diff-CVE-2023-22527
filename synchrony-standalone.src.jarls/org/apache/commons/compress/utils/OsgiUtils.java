package org.apache.commons.compress.utils;

public class OsgiUtils {
  private static final boolean inOsgiEnvironment;
  
  static  {
    classloaderClass = OsgiUtils.class.getClassLoader().getClass();
    inOsgiEnvironment = isBundleReference(classloaderClass);
  }
  
  private static boolean isBundleReference(Class<?> clazz) {
    Class<?> c = clazz;
    while (c != null) {
      if (c.getName().equals("org.osgi.framework.BundleReference"))
        return true; 
      for (Class<?> ifc : c.getInterfaces()) {
        if (isBundleReference(ifc))
          return true; 
      } 
      c = c.getSuperclass();
    } 
    return false;
  }
  
  public static boolean isRunningInOsgiEnvironment() { return inOsgiEnvironment; }
}
