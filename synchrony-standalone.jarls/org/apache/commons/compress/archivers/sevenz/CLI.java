package org.apache.commons.compress.archivers.sevenz;

import java.io.File;

public class CLI {
  private static Mode grabMode(String[] args) {
    if (args.length < 2)
      return Mode.LIST; 
    return (Mode)Enum.valueOf(Mode.class, args[1].toUpperCase());
  }
  
  public static void main(String[] args) throws Exception {
    if (args.length == 0) {
      usage();
      return;
    } 
    Mode mode = grabMode(args);
    System.out.println(mode.getMessage() + " " + args[0]);
    File f = new File(args[0]);
    if (!f.isFile())
      System.err.println(f + " doesn't exist or is a directory"); 
    SevenZFile archive = new SevenZFile(f);
    try {
      SevenZArchiveEntry ae;
      while ((ae = archive.getNextEntry()) != null)
        mode.takeAction(archive, ae); 
      archive.close();
    } catch (Throwable throwable) {
      try {
        archive.close();
      } catch (Throwable throwable1) {
        throwable.addSuppressed(throwable1);
      } 
      throw throwable;
    } 
  }
  
  private static void usage() { System.out.println("Parameters: archive-name [list]"); }
}
