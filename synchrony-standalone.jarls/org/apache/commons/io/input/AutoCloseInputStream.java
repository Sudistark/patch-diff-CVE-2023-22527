package org.apache.commons.io.input;

import java.io.IOException;
import java.io.InputStream;

public class AutoCloseInputStream extends ProxyInputStream {
  public static Builder builder() { return new Builder(); }
  
  @Deprecated
  public AutoCloseInputStream(InputStream in) { super(in); }
  
  protected void afterRead(int n) throws IOException {
    if (n == -1)
      close(); 
  }
  
  public void close() throws IOException {
    this.in.close();
    this.in = ClosedInputStream.INSTANCE;
  }
  
  protected void finalize() throws IOException {
    close();
    super.finalize();
  }
}
