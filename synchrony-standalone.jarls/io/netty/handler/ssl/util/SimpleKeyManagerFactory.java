package io.netty.handler.ssl.util;

import io.netty.util.concurrent.FastThreadLocal;
import io.netty.util.internal.ObjectUtil;
import java.security.KeyStore;
import java.security.Provider;
import javax.net.ssl.KeyManager;
import javax.net.ssl.KeyManagerFactory;
import javax.net.ssl.KeyManagerFactorySpi;
import javax.net.ssl.ManagerFactoryParameters;

public abstract class SimpleKeyManagerFactory extends KeyManagerFactory {
  private static final Provider PROVIDER = new Object("", 0.0D, "");
  
  private static final FastThreadLocal<SimpleKeyManagerFactorySpi> CURRENT_SPI = new Object();
  
  protected SimpleKeyManagerFactory() { this(""); }
  
  protected SimpleKeyManagerFactory(String name) {
    super((KeyManagerFactorySpi)CURRENT_SPI.get(), PROVIDER, (String)ObjectUtil.checkNotNull(name, "name"));
    ((SimpleKeyManagerFactorySpi)CURRENT_SPI.get()).init(this);
    CURRENT_SPI.remove();
  }
  
  protected abstract void engineInit(KeyStore paramKeyStore, char[] paramArrayOfChar) throws Exception;
  
  protected abstract void engineInit(ManagerFactoryParameters paramManagerFactoryParameters) throws Exception;
  
  protected abstract KeyManager[] engineGetKeyManagers();
}
