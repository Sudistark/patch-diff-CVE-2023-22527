package com.hazelcast.util;

import java.util.HashMap;
import java.util.Map;

public final class ContextMutexFactory {
  final Map<Object, Mutex> mutexMap = new HashMap();
  
  private final Object mainMutex = new Object();
  
  public Mutex mutexFor(Object mutexKey) {
    Mutex mutex;
    synchronized (this.mainMutex) {
      mutex = (Mutex)this.mutexMap.get(mutexKey);
      if (mutex == null) {
        mutex = new Mutex(this, mutexKey, null);
        this.mutexMap.put(mutexKey, mutex);
      } 
      Mutex.access$108(mutex);
    } 
    return mutex;
  }
}
