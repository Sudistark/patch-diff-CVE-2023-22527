package com.fasterxml.jackson.databind.util;

import java.lang.reflect.Array;
import java.util.HashSet;

public final class ArrayBuilders {
  private BooleanBuilder _booleanBuilder = null;
  
  private ByteBuilder _byteBuilder = null;
  
  private ShortBuilder _shortBuilder = null;
  
  private IntBuilder _intBuilder = null;
  
  private LongBuilder _longBuilder = null;
  
  private FloatBuilder _floatBuilder = null;
  
  private DoubleBuilder _doubleBuilder = null;
  
  public BooleanBuilder getBooleanBuilder() {
    if (this._booleanBuilder == null)
      this._booleanBuilder = new BooleanBuilder(); 
    return this._booleanBuilder;
  }
  
  public ByteBuilder getByteBuilder() {
    if (this._byteBuilder == null)
      this._byteBuilder = new ByteBuilder(); 
    return this._byteBuilder;
  }
  
  public ShortBuilder getShortBuilder() {
    if (this._shortBuilder == null)
      this._shortBuilder = new ShortBuilder(); 
    return this._shortBuilder;
  }
  
  public IntBuilder getIntBuilder() {
    if (this._intBuilder == null)
      this._intBuilder = new IntBuilder(); 
    return this._intBuilder;
  }
  
  public LongBuilder getLongBuilder() {
    if (this._longBuilder == null)
      this._longBuilder = new LongBuilder(); 
    return this._longBuilder;
  }
  
  public FloatBuilder getFloatBuilder() {
    if (this._floatBuilder == null)
      this._floatBuilder = new FloatBuilder(); 
    return this._floatBuilder;
  }
  
  public DoubleBuilder getDoubleBuilder() {
    if (this._doubleBuilder == null)
      this._doubleBuilder = new DoubleBuilder(); 
    return this._doubleBuilder;
  }
  
  public static Object getArrayComparator(Object defaultValue) {
    int length = Array.getLength(defaultValue);
    Class<?> defaultValueType = defaultValue.getClass();
    return new Object(defaultValueType, length, defaultValue);
  }
  
  public static <T> HashSet<T> arrayToSet(T[] elements) {
    if (elements != null) {
      int len = elements.length;
      HashSet<T> result = new HashSet<T>(len);
      for (int i = 0; i < len; i++)
        result.add(elements[i]); 
      return result;
    } 
    return new HashSet();
  }
  
  public static <T> T[] insertInListNoDup(T[] array, T element) {
    int len = array.length;
    for (int ix = 0; ix < len; ix++) {
      if (array[ix] == element) {
        if (ix == 0)
          return array; 
        T[] result = (T[])(Object[])Array.newInstance(array.getClass().getComponentType(), len);
        System.arraycopy(array, 0, result, 1, ix);
        result[0] = element;
        ix++;
        int left = len - ix;
        if (left > 0)
          System.arraycopy(array, ix, result, ix, left); 
        return result;
      } 
    } 
    T[] result = (T[])(Object[])Array.newInstance(array.getClass().getComponentType(), len + 1);
    if (len > 0)
      System.arraycopy(array, 0, result, 1, len); 
    result[0] = element;
    return result;
  }
}
