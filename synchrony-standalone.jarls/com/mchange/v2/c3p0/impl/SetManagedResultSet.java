package com.mchange.v2.c3p0.impl;

import com.mchange.v2.sql.filter.FilterResultSet;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Set;

abstract class SetManagedResultSet extends FilterResultSet {
  Set activeResultSets;
  
  SetManagedResultSet(Set activeResultSets) { this.activeResultSets = activeResultSets; }
  
  SetManagedResultSet(ResultSet inner, Set activeResultSets) {
    super(inner);
    this.activeResultSets = activeResultSets;
  }
  
  public void setInner(ResultSet inner) {
    this.inner = inner;
    this.activeResultSets.add(inner);
  }
  
  public void close() throws SQLException {
    if (this.inner != null) {
      this.inner.close();
      this.activeResultSets.remove(this.inner);
      this.inner = null;
    } 
  }
}
